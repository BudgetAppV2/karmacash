# Post-MVP Features

This document outlines the planned features for KarmaCash beyond the Minimum Viable Product (MVP). These features will be implemented after the core application is stable and functional, with prioritization based on user value and technical feasibility.

## Feature Prioritization

The following features are listed in order of implementation priority:

1.  Shared Budgets (Full Functionality)
2.  User Onboarding Feature
3.  Option d'inclusion des dépenses récurrentes dans les catégories (bascule) (Recurring expense toggle)
4.  Développement complet du Tableau de Bord (Dashboard) (Full dashboard development)
5.  Goal Setting
6.  Push Notifications
7.  Graphique de comparaison des transactions par utilisateur (pour Budgets Partagés) (User transaction comparison graph for shared budgets)
8.  Basic Reporting (Expanded)
9.  CSV Import/Reconciliation
10. Authentication Enhancements
11. User Experience Refinements (General)
12. Financial Mindfulness Features
13. Autres améliorations UI/UX et fonctionnalités mineures... (Other minor improvements)

## 1. Shared Budgets (Highest Priority)

### Overview
Enable multiple users to collaboratively manage a single budget, supporting families, couples, roommates, or other household arrangements.

### Key Functionality
- Budget owners can invite other registered users to access and collaborate on their KarmaCash budget.
- Invited users can accept invitations to join a shared budget.
- Transactions added by any member are visible to all members (respecting potential privacy flags if implemented later).
- Budget allocations and spending progress are visible and editable by members based on defined permissions (e.g., owner, editor, viewer).
- All budget calculations properly account for multi-user input where appropriate.

### Technical Implementation Notes
- Requires the architectural shift to a top-level `/budgets/{budgetId}` data structure (planned for M4a).
- Firestore Security rules will be critical for managing permissions based on a `members` map/subcollection within the budget document.
- Transactions will need to link to `budgetId`. Final decision on whether Categories and Recurring Rules also link to `budgetId` or remain user-specific needs confirmation during M4a design. [B5.1]
- Implementation must align with core technical standards ([B2.2], [B2.3]).

### User Stories
- As a budget owner, I want to invite other registered users to access and collaborate on my KarmaCash budget, so we can manage finances together.
- As an invited user, I want to accept an invitation to join a shared budget, so I can view and contribute to it.
- As a member of a shared budget, I want transactions added by any member to be visible to all members with appropriate permissions, so we have a unified financial picture.
- As a member of a shared budget, I want budget allocations and spending progress to be visible and potentially editable based on my role (owner/editor/viewer), fostering collaboration and transparency.

## 2. User Onboarding Feature

### Overview
To provide a welcoming and efficient first-time experience, guiding new users through essential setup steps and familiarizing them with KarmaCash's core functionalities to ensure they can start budgeting effectively and confidently.

### Key Functionality
-   **Welcome & Introduction:** Display a clear welcome message and briefly introduce the KarmaCash philosophy.
-   **Initial Setup Guidance:** Guide users through critical initial settings, such as selecting their primary currency and choosing or customizing a set of default budget categories.
-   **Key UI Element Tour:** Briefly highlight and explain the main sections of the application (e.g., Budget page, Transactions, Categories) and how to navigate between them.
-   **Optional Data Import Prompt:** If CSV import functionality becomes available, offer an option to import existing transaction data as part of the setup.
-   **Completion & Encouragement:** Conclude with a positive message and clear next steps to begin using the app, reinforcing the app's value proposition.

### Technical Implementation Notes (Brief)
-   Could be implemented as a sequence of interactive modals, a step-by-step guided tour overlay (e.g., using a library like Shepherd.js or Intro.js), or a dedicated onboarding flow.
-   State management will be crucial to track onboarding completion for each user, preventing it from showing on subsequent logins unless reset by the user.
-   Consideration for "Enso trace" or similar user flow analytics to understand completion rates and identify potential drop-off points for future improvement.
-   Ensure the design and interactions align with KarmaCash's Zen/Tranquility theme ([B3.4], [B3.8]), avoiding overwhelming the user.
-   Adheres to core development standards ([B2.2], [B2.3]).

### User Stories
-   "As a new user, I want a clear and simple onboarding process so I can quickly understand how to set up and use KarmaCash effectively."
-   "As a new user, I want to be guided through initial settings like currency and default categories so I don't feel lost or overwhelmed when I first open the app."
-   "As a new user, I want a brief tour of the main features and navigation so I know where to find things and how to get started with budgeting right away."

## 3. Recurring Expense Category Toggle

### Overview
This feature provides users with the flexibility to decide how their scheduled recurring expenses are integrated into their category budgeting process. Users can choose whether these recurring outflows are directly factored into their individual category budget allocations (reducing the "available to spend" from the category's budget) or if they are managed as separate, fixed expenses outside of the flexible category spending targets.

### Key Functionality
-   **User-Configurable Setting:** A clear toggle or setting, likely available globally or per specific budget, allowing users to switch this behavior on or off.
-   **Direct Deduction (If Enabled):** When enabled, the sum of recurring expenses linked to a specific category for the budget period will directly reduce the amount effectively available for discretionary spending within that category's allocated budget. The UI will reflect this "net available" amount.
-   **Separate Tracking (If Disabled):** When disabled (or by default, mirroring potential current behavior), recurring expenses are treated as fixed outflows managed distinctly from the flexible amounts users allocate to categories. Category budgets represent targets for variable spending.
-   **UI Clarity:** The user interface, particularly on the budget allocation page, must clearly indicate how "available for spending" amounts in categories are calculated, especially when the toggle is enabled (e.g., showing "Budgeted: $X - Fixed: $Y = Spendable: $Z").
-   **Impact on "Reste à Allouer":** The overall "Reste à Allouer" (Remaining to Allocate) calculation must accurately reflect the chosen method of handling recurring expenses to prevent over-budgeting.

### Technical Implementation Notes (Brief)
-   This feature will significantly impact the `recalculateBudget` logic ([B6.1]), requiring conditional calculations based on the toggle's state.
-   Substantial changes will be needed in how category budget amounts, available spending within categories, and the overall "Reste à Allouer" are displayed and calculated on the main budget page and related UI components.
-   A new field (e.g., `includeRecurringInCategoryBudget: boolean`) will likely be required in the user's budget settings document or the main budget document itself.
-   Careful consideration is needed for how this interacts with rollovers and overall budget summary views.
-   Adheres to core development standards ([B2.2], [B2.3]).

### User Stories
-   "As a user, I want to choose if my fixed recurring bills (like rent or subscriptions tied to a category) are automatically deducted from my category budgets, so I can see a more realistic 'spendable' amount in each category for my discretionary spending."
-   "As a user who prefers to see recurring expenses as fixed and separate from my flexible spending goals, I want to ensure they don't directly reduce my category allocation targets, allowing me to budget for variable expenses more clearly."
-   "As a user, I want the application to transparently show me how my recurring expenses are affecting my category budgets and overall 'Remaining to Allocate', based on my chosen setting."

## 4. Full Dashboard Development

### Overview
This feature entails the complete implementation of the main user dashboard, building upon the foundational concept, functional scope, and UI/UX design defined during Milestone 5. The dashboard will serve as the central landing point for users, providing a comprehensive, personalized, and at-a-glance overview of their current financial situation, key budget metrics, and actionable insights.

### Key Functionality
-   **Key Financial Summaries:** Prominently display essential financial summaries for the current budget period, such as total income, total expenses, and net balance (savings/deficit).
-   **"Reste à Allouer" (Remaining to Allocate):** Clearly show the current "Reste à Allouer" amount to inform immediate budgeting decisions.
-   **Top Category Spending Visualizations:** Include concise visual representations (e.g., a mini pie chart, a horizontal bar graph, or top 3-5 categories) of spending distribution across main categories for the current period.
-   **Savings Goal Quick View:** If the "Goal Setting" feature is implemented, display a summary or progress indicators for active savings goals.
-   **Quick Actions/Links:** Provide convenient links or buttons for frequently performed tasks, such as "Add Transaction," "View Full Budget," or navigating to specific analysis sections.
-   **Data Insights & Trends (Potential):** Offer brief insights, like "You've spent X% of your Food budget" or "Your spending is Y% higher than last month."
-   **Customizable Widgets/Layout (Future Refinement):** While the initial Post-MVP version will have a defined layout, design with future customizability in mind (as noted in "Additional Post-MVP Considerations").

### Technical Implementation Notes (Brief)
-   Will heavily leverage the data aggregation and budget calculation logic established in [B6.1].
-   Requires efficient and potentially complex Firestore queries to fetch and summarize data from `budgets`, `transactions`, and `categories` collections.
-   A modular, component-based architecture ([B3.7]) will be essential for constructing the dashboard from reusable UI elements and data widgets.
-   Needs careful consideration for data freshness, potentially employing real-time listeners for key figures or a clear refresh mechanism.
-   Dashboard design must adhere to KarmaCash's Zen/Tranquility principles ([B3.4], [B3.8]), presenting information clearly without overwhelming the user.
-   Adheres to core development standards ([B2.2], [B2.3]).

### User Stories
-   "As a user, I want a comprehensive dashboard that gives me an immediate overview of my financial health and key budget figures as soon as I open the app, so I can quickly grasp where I stand."
-   "As a user, I want my dashboard to visually summarize my spending patterns and progress towards any savings goals at a glance, enabling me to make informed financial decisions without deep-diving into reports."
-   "As a user, I want quick access from my dashboard to the most common actions I perform, like adding a transaction or viewing my detailed budget, to make my daily financial management more efficient."

## 5. Goal Setting

### Overview
Allow users to create specific budget categories designated as "Savings Goals" with target amounts and optional target dates, enhancing purposeful saving.

### Key Functionality
- Dedicated UI for creating and managing savings goals (potentially integrated with Category management).
- Define target amount and optional target date per goal.
- Visual progress tracking toward defined goals within the budget view.
- Goal-specific allocation suggestions or tracking.
- Potential timeline projections for goal achievement.

### Technical Implementation Notes
- Likely extends the existing category data model ([B5.2]) with goal-specific fields (`isGoal`, `targetAmount`, `targetDate`).
- Requires specialized handling in the budget allocation UI ([B4b] feature) and reporting/visualization ([M5] feature).
- Will use the animation principles defined in [B3.11] for visual feedback on progress.
- Adheres to core standards ([B2.2], [B2.3]).

### User Stories
- As a user, I want to designate certain budget categories as 'Savings Goals', so I can specifically track progress towards important financial objectives (e.g., Emergency Fund, Vacation).
- As a user, when creating a Savings Goal, I want to set a target amount and optionally a target date, so KarmaCash can help me monitor my progress visually.
- As a user, I want KarmaCash to clearly show how much I've allocated and saved towards my defined Savings Goals, potentially using motivating visuals [B3.11].

## 6. Push Notifications

### Overview
Implement timely, relevant notifications to keep users informed about their budget status and activities, enhancing engagement and financial awareness.

### Key Functionality
- **Shared Budgets:** Notify members when another member adds/updates a significant transaction or modifies budget allocations (user configurable).
- **Recurring Transactions:** Optional reminder on the day a recurring transaction is scheduled or generated.
- **Budget/Goal Alerts:** Optional notification when nearing or exceeding a category budget limit, or when reaching a savings goal milestone.
- **General:** Potential reminders for budget rollover periods.
- **Preferences:** Users can configure which notifications they receive.

### Technical Implementation Notes
- Will utilize Firebase Cloud Messaging (FCM) requiring setup and potential Cloud Functions for triggering.
- Requires obtaining user permission for notifications (platform-specific).
- Must respect user preferences and privacy settings meticulously.
- Notifications should maintain the Zen/Tranquility theme: informative but non-intrusive design ([B3.4], [B3.8]).
- Adheres to core standards ([B2.2], [B2.3]).

### User Stories
- As a user sharing a budget, I want the option to receive a push notification when another member adds a transaction over a certain amount or modifies the budget, so I can stay informed about our shared finances in real-time.
- As a user, I want to optionally receive a reminder on the day a recurring transaction is due, so I can prepare or verify it.
- As a user, I want the ability to set optional push notification alerts when I approach (e.g., 90%) or exceed a spending category's budget, helping me stay on track.
- As a user, I want to easily manage my notification preferences within KarmaCash to control the frequency and types of alerts I receive.

## 7. User Transaction Comparison Graph (Shared Budgets)

### Overview
This feature enhances the "Shared Budgets" functionality by providing a clear visual representation of each member's contribution to transactions or overall spending within a selected period. It aims to foster transparency and facilitate discussions about shared financial habits among members of a collaborative budget.

### Key Functionality
-   **Contextual Accessibility:** The graph will be accessible from within the main view or analysis section of a specific shared budget.
-   **Period Selection:** Users can select a time period for the comparison (e.g., current budget month, last month, custom date range).
-   **Visual Breakdown:** Displays an intuitive chart (e.g., pie chart, stacked bar chart, or individual bars per user) illustrating the proportion (percentage or absolute amount) of transactions or total spending attributed to each member of the shared budget.
-   **Data View Options:** Users can toggle the view to compare contributions based on either the total count of transactions or the total monetary value of transactions made by each member.
-   **Clear Presentation:** Ensures clear labeling of users, amounts/percentages, and easy-to-understand visualization, even with multiple budget members.
-   **Category Drill-Down (Potential):** Future enhancement could allow filtering this comparison for specific categories within the shared budget.

### Technical Implementation Notes (Brief)
-   Directly builds upon the "Shared Budgets" feature and its data model, requiring that each transaction within a shared budget is attributable to a specific user ID.
-   Involves Firestore queries to fetch transactions for a specific shared budget ID within a given date range, then aggregating this data per user (summing amounts or counting transactions).
-   A suitable charting library (e.g., Chart.js, Recharts, Nivo) will be used for rendering the visualization.
-   The visualization needs to be designed to handle a varying number of users in a shared budget gracefully (e.g., grouping smaller contributors into an "Others" category if space is limited on a pie chart).
-   Data queries must be optimized for performance, especially with long time periods or many transactions.
-   Adheres to core development standards ([B2.2], [B2.3]) and UI/UX principles ([B3.4], [B3.8]).

### User Stories
-   "As a member of a shared household budget, I want to see a visual breakdown of who contributed to the grocery spending this month, so we can have better discussions about our shared expenses."
-   "As a couple sharing all our finances via KarmaCash, I want to easily see our respective spending percentages for the month to ensure we're on track with our agreed financial contributions or to identify areas where one person might be unknowingly overspending."
-   "As someone managing a group trip budget with friends, I want a quick way to visualize each member's contribution to shared expenses for easy reconciliation and to ensure everyone has paid their fair share."

## 8. Basic Reporting

### Overview
Provide deeper financial insights through expanded reporting and analysis capabilities beyond simple transaction lists and summaries.

### Key Functionality
- Customizable date range selection for reports (beyond default Week/Month).
- Spending trend analysis over selectable periods (e.g., last 3 months, year-to-date) per category or overall.
- Comparison reports (e.g., this month vs. last month, this month vs. budget).
- Potential export functionality for reports (CSV format first, PDF later).

### Technical Implementation Notes
- Will likely build upon visualization components created during M4/M5.
- Requires potentially more complex Firestore queries for data aggregation over longer/custom periods. Query efficiency will be important.
- Export functionality likely handled client-side initially.
- Must maintain the clear, uncluttered aesthetic of KarmaCash ([B3.4]).
- Adheres to core standards ([B2.2], [B2.3]).

### User Stories
- As a user, I want to view my spending trends by category over custom periods (e.g., last 6 months), so I can identify long-term patterns.
- As a user, I want to compare my spending this month to last month or to my budget allocations, so I can understand my progress and habits.
- As a user, I want the ability to export my filtered transaction data or summary reports (e.g., as CSV), so I can perform external analysis or keep records.

## 9. CSV Import/Reconciliation

### Overview
Allow users to import transaction data from CSV files exported from banking platforms and reconcile it with manually tracked transactions within KarmaCash.

### Key Functionality
- UI for uploading a CSV file.
- Field mapping interface to match CSV columns (Date, Description, Amount) to KarmaCash fields.
- Algorithm to attempt matching imported transactions with existing manual entries (based on date, amount, potentially description heuristics).
- Clear UI workflow to review matches, manually link unmatched transactions, approve creation of new transactions from import, or ignore imported rows.
- Avoidance of duplicate entries after reconciliation.

### Technical Implementation Notes
- CSV parsing and processing will happen entirely client-side for privacy (no storage of raw bank files). Libraries like PapaParse can be used.
- The matching algorithm needs careful design to balance accuracy and user effort.
- The reconciliation UI needs to be clear and intuitive, aligning with the Zen theme despite potential complexity ([B3.4], [B3.8]).
- Adheres to core standards ([B2.2], [B2.3]).

### User Stories
- As a user, I want to import a CSV file of transactions downloaded from my bank, so I can verify my manual tracking in KarmaCash.
- As a user, I want KarmaCash to guide me through mapping the columns from my bank's CSV file to the required KarmaCash fields (Date, Description, Amount).
- As a user, I want KarmaCash to automatically suggest matches between imported transactions and existing manual entries based on date and amount.
- As a user, I want a clear interface to review suggested matches, manually link transactions, create new transactions from the import, or ignore imported rows, so I can confidently reconcile my data.

## Additional Post-MVP Considerations

### Authentication Enhancements
- Social login options (e.g., Google Sign-In).
- More robust account recovery mechanisms.

### User Experience Refinements
- Customizable dashboard layout.
- More diverse chart/visualization options in the 'Graphiques' section.
- Dark mode support (respecting theme).

### Financial Mindfulness Features
- Optional reflective prompts during transaction entry (e.g., "How does this purchase align with your goals?").
- Guided periodic financial review/"check-in" workflows.
- Feature to set personal financial intentions or values.

These future enhancements will continue to build on the core Zen/Tranquility theme, expanding functionality while maintaining the calm, focused approach to financial management that defines KarmaCash.